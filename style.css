/* ============================================================
   ChibiTheme Studio — Enhanced Anime CSS v2.0
   ✦ Glassmorphism · Sakura · Neon Glow · Smooth Animations
   ============================================================ */

/* --- CSS Custom Properties (Design Tokens) --- */
:root {
  --pink-100: #fff0f9;
  --pink-200: #fde0f3;
  --pink-300: #fdcdf3;
  --pink-400: #fa97e7;
  --pink-500: #f97ed8;
  --pink-600: #ec62b2;
  --pink-700: #d44a9a;
  --cyan-400: #6dc3fe;
  --cyan-500: #2bd1ff;
  --purple-400: #da97fe;
  --purple-500: #b57bee;
  --dark-900: #0d0e18;
  --dark-800: #131420;
  --dark-700: #181a26;
  --dark-600: #1e2130;
  --dark-500: #22263a;
  --glass-bg: rgba(20, 22, 38, 0.82);
  --glass-border: rgba(251, 177, 229, 0.22);
  --ease-bounce: cubic-bezier(.27, 1.55, .48, .81);
  --ease-smooth: cubic-bezier(.4, 0, .2, 1);
  --ease-spring: cubic-bezier(.34, 1.56, .64, 1);
  --transition-base: 0.26s cubic-bezier(.4, 0, .2, 1);
}

/* --- Reset & Base --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  min-height: 100vh;
  color: #e9eaf7;
  font-family: 'Poppins', 'Inter', system-ui, sans-serif;
  overflow-x: hidden;
  background: #131420;
  position: relative;
}

/* === ANIMATED BACKGROUND === */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(ellipse 120% 80% at 15% 10%, rgba(218,151,254,0.13) 0%, transparent 55%),
    radial-gradient(ellipse 80% 60% at 85% 90%, rgba(109,195,254,0.10) 0%, transparent 50%),
    radial-gradient(ellipse 100% 100% at 50% 50%, rgba(249,126,216,0.06) 0%, transparent 70%),
    linear-gradient(160deg, #0d0e1c 0%, #12152a 35%, #0f1118 65%, #0d0e1a 100%);
  animation: bgShift 18s ease-in-out infinite alternate;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(ellipse 60% 40% at 20% 80%, rgba(251,177,229,0.07) 0%, transparent 60%),
    radial-gradient(ellipse 50% 30% at 80% 20%, rgba(109,195,254,0.07) 0%, transparent 60%);
  animation: auroraShimmer 12s ease-in-out infinite alternate-reverse;
}

@keyframes bgShift {
  0%   { opacity: 1; }
  50%  { opacity: 0.85; filter: hue-rotate(8deg); }
  100% { opacity: 1; filter: hue-rotate(-5deg); }
}
@keyframes auroraShimmer {
  0%   { transform: scale(1) rotate(0deg); opacity: 0.8; }
  50%  { transform: scale(1.08) rotate(2deg); opacity: 1; }
  100% { transform: scale(0.97) rotate(-1deg); opacity: 0.7; }
}

/* === GLASSMORPHISM === */
.glass {
  background: var(--glass-bg);
  border-radius: 1.8em;
  box-shadow:
    0 8px 32px rgba(13,14,24,0.55),
    0 2px 8px rgba(13,14,24,0.3),
    inset 0 1px 0 rgba(251,177,229,0.15),
    inset 0 -1px 0 rgba(13,14,24,0.4);
  backdrop-filter: blur(24px) saturate(200%) brightness(1.04);
  -webkit-backdrop-filter: blur(24px) saturate(200%) brightness(1.04);
  border: 1.5px solid var(--glass-border);
  animation: glassReveal 0.9s cubic-bezier(.27,1.55,.48,.81) both;
  position: relative;
  overflow: hidden;
}

.glass::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(135deg, transparent 20%, rgba(249,126,216,0.1) 40%, rgba(109,195,254,0.08) 60%, transparent 80%);
  background-size: 300% 300%;
  animation: shimmerBorder 6s linear infinite;
  pointer-events: none;
  z-index: 0;
}

@keyframes glassReveal {
  from { opacity: 0; transform: translateY(16px) scale(0.97); filter: blur(4px); }
  to   { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}
@keyframes shimmerBorder {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* === BRANDING === */
.branding {
  width: fit-content;
  margin: 44px auto 18px auto;
  padding: 16px 48px 16px 20px;
  display: flex;
  align-items: center;
  gap: 20px;
  background: linear-gradient(115deg, rgba(253,205,243,0.12) 0%, rgba(20,22,40,0.88) 90%);
  border-radius: 1.1em 2.2em 1.4em 1em;
  box-shadow: 0 4px 32px rgba(253,171,211,0.22), 0 1px 8px rgba(13,14,24,0.5), inset 0 1px 0 rgba(253,171,211,0.3);
  animation: brandingSlide 1s cubic-bezier(.34,1.56,.64,1) 0.1s both;
  border: 2px solid rgba(253,171,211,0.35);
  position: relative;
  z-index: 2;
  overflow: hidden;
}

.branding::after {
  content: "";
  position: absolute;
  top: 0; left: -100%;
  width: 60%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,200,240,0.18), transparent);
  animation: brandingSweep 4s ease-in-out 1.5s infinite;
  pointer-events: none;
}

@keyframes brandingSlide {
  from { opacity: 0; transform: translateX(-30px) scale(0.93); }
  to   { opacity: 1; transform: translateX(0) scale(1); }
}
@keyframes brandingSweep {
  0%   { left: -100%; }
  40%  { left: 130%; }
  100% { left: 130%; }
}

.branding-logo {
  width: 58px; height: 58px;
  border-radius: 16px;
  filter: drop-shadow(0 0 20px rgba(253,205,243,0.8)) drop-shadow(0 0 8px rgba(249,126,216,0.6)) saturate(1.6) brightness(1.12);
  animation: logoFloat 4s ease-in-out infinite, logoPop 0.8s cubic-bezier(.34,1.56,.64,1) 0.3s both;
  position: relative;
  z-index: 1;
}

@keyframes logoFloat {
  0%, 100% { transform: translateY(0) rotate(-1deg); }
  50%       { transform: translateY(-6px) rotate(1deg); }
}
@keyframes logoPop {
  from { opacity: 0; transform: scale(0) rotate(-20deg); }
  70%  { transform: scale(1.15) rotate(5deg); }
  to   { opacity: 1; transform: scale(1) rotate(0deg); }
}

.branding h1 {
  font-size: 1.55rem;
  font-weight: 700;
  background: linear-gradient(135deg, #ffd6f3 0%, #fa97e7 40%, #6dc3fe 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.01em;
  line-height: 1.2;
  animation: titleGlow 3s ease-in-out infinite alternate;
  position: relative;
  z-index: 1;
}
@keyframes titleGlow {
  from { filter: drop-shadow(0 0 6px rgba(249,126,216,0.4)); }
  to   { filter: drop-shadow(0 0 18px rgba(109,195,254,0.5)); }
}

.tagline {
  margin: 4px 0 0 2px;
  font-weight: 400;
  letter-spacing: 0.06em;
  font-size: 0.92rem;
  color: #fa97e7;
  opacity: 0.88;
  text-shadow: 0 2px 14px rgba(253,205,243,0.55);
  position: relative;
  z-index: 1;
  animation: taglineFade 0.7s ease 0.7s both;
}
@keyframes taglineFade {
  from { opacity: 0; transform: translateX(10px); }
  to   { opacity: 0.88; transform: translateX(0); }
}

/* === MAIN UI === */
#main-ui {
  max-width: 920px;
  margin: 0 auto 72px auto;
  padding: 34px 40px 42px 40px;
  position: relative;
  z-index: 2;
}
@media (max-width: 768px) { #main-ui { padding: 22px 16px 28px 16px; } }
@media (max-width: 480px) { #main-ui { padding: 14px 8px 20px 8px; } }

/* === TAB NAVIGATION === */
.tab-nav {
  display: flex;
  gap: 8px;
  margin-bottom: 34px;
  padding-bottom: 0;
  position: relative;
}
.tab-nav::after {
  content: "";
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(251,177,229,0.3), transparent);
  border-radius: 2px;
}

.tab-link {
  background: rgba(255,255,255,0.04);
  outline: none;
  border: 1.5px solid rgba(251,177,229,0.12);
  padding: 12px 32px 14px 32px;
  font: 600 1.05em 'Poppins', sans-serif;
  color: rgba(249,126,216,0.7);
  cursor: pointer;
  border-radius: 1.2em 1.2em 0 0;
  user-select: none;
  transition: color 0.26s, background 0.26s, border-color 0.26s, box-shadow 0.26s, transform 0.18s cubic-bezier(.34,1.56,.64,1);
  position: relative;
  overflow: hidden;
}

.tab-link::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(249,126,216,0.1) 0%, rgba(109,195,254,0.06) 100%);
  opacity: 0;
  transition: opacity 0.24s;
  border-radius: inherit;
}
.tab-link:hover::before { opacity: 1; }

.tab-link:hover {
  color: #fff0fa;
  background: rgba(249,126,216,0.1);
  border-color: rgba(249,126,216,0.3);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(249,126,216,0.14);
}

.tab-link.active {
  background: linear-gradient(145deg, rgba(249,126,216,0.22) 0%, rgba(109,195,254,0.12) 100%);
  color: #fff8fc;
  border-color: rgba(249,126,216,0.45);
  border-bottom-color: transparent;
  box-shadow: 0 -4px 16px rgba(249,126,216,0.16), inset 0 1px 0 rgba(255,220,248,0.25);
  transform: translateY(-1px);
}

.tab-link::after {
  content: "";
  position: absolute;
  bottom: 0; left: 16px; right: 16px;
  height: 3px;
  background: linear-gradient(90deg, #fa97e7, #6dc3fe);
  border-radius: 3px 3px 0 0;
  opacity: 0;
  transform: scaleX(0.5);
  transition: opacity 0.26s, transform 0.3s cubic-bezier(.34,1.56,.64,1);
  box-shadow: 0 0 12px #f97ed8, 0 0 6px #6dc3fe;
}
.tab-link.active::after { opacity: 1; transform: scaleX(1); }

.tab-content { display: none; animation: tabReveal 0.5s cubic-bezier(.4,0,.2,1) both; }
.tab-content.active { display: block; }
@keyframes tabReveal {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* === MODULE HEADERS === */
.module-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 22px;
  gap: 12px;
}

.module-header h2 {
  font-size: 1.38em;
  font-weight: 700;
  background: linear-gradient(120deg, #ffd6ef 0%, #fa97e7 55%, #6dc3fe 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.01em;
  margin: 0;
}
.module-header h2::before {
  content: "✦ ";
  -webkit-text-fill-color: #f97ed8;
  font-size: 0.7em;
  animation: starSpin 4s linear infinite;
  display: inline-block;
}
@keyframes starSpin {
  from { transform: rotate(0deg) scale(1); }
  50%  { transform: rotate(180deg) scale(1.3); }
  to   { transform: rotate(360deg) scale(1); }
}

.icon-count, .resolution-count {
  font-size: 0.88em;
  font-family: 'Fira Code', monospace;
  color: #ec62b2;
  background: linear-gradient(135deg, rgba(253,230,247,0.9), rgba(253,205,243,0.75));
  border-radius: 2em;
  padding: 5px 18px 5px 12px;
  font-weight: 500;
  letter-spacing: 0.04em;
  border: 1px solid rgba(236,98,178,0.25);
  box-shadow: 0 2px 12px rgba(249,126,216,0.14), inset 0 1px 0 rgba(255,255,255,0.4);
  animation: badgePulse 3s ease-in-out infinite;
  white-space: nowrap;
}
@keyframes badgePulse {
  0%, 100% { box-shadow: 0 2px 12px rgba(249,126,216,0.14), inset 0 1px 0 rgba(255,255,255,0.4); color: #ec62b2; }
  50%       { box-shadow: 0 2px 20px rgba(249,126,216,0.32), inset 0 1px 0 rgba(255,255,255,0.4); color: #d44a9a; }
}
@media (max-width:600px) {
  .module-header h2 { font-size: 1.1em; }
  .icon-count, .resolution-count { font-size: 0.82em; padding: 4px 12px; }
}

/* === UPLOAD AREAS === */
.upload-area {
  border: 2.5px dashed rgba(250,190,237,0.55);
  background: linear-gradient(135deg, rgba(253,240,255,0.06) 0%, rgba(20,22,38,0.7) 100%);
  border-radius: 1.2em;
  text-align: center;
  margin: 24px 0 32px 0;
  padding: 52px 20px 40px 20px;
  cursor: pointer;
  transition: border-color 0.28s, background 0.28s, box-shadow 0.28s, transform 0.22s cubic-bezier(.34,1.56,.64,1);
  color: #f97ed8;
  font-size: 1.1em;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 28px rgba(253,149,237,0.08), inset 0 1px 0 rgba(250,190,237,0.1);
  animation: uploadReveal 0.7s 0.15s cubic-bezier(.4,0,.2,1) both;
}

.upload-area::before {
  content: "✦";
  position: absolute;
  top: 16px; left: 50%; transform: translateX(-50%);
  font-size: 1.4em;
  color: #fa97e7;
  opacity: 0.5;
  animation: iconFloat 3s ease-in-out infinite;
}
.upload-area::after {
  content: "";
  position: absolute;
  top: -100%; left: -10%;
  width: 120%; height: 3px;
  background: linear-gradient(90deg, transparent, rgba(249,126,216,0.45), rgba(109,195,254,0.35), transparent);
  animation: scanLine 4s ease-in-out 1s infinite;
  pointer-events: none;
}
@keyframes scanLine {
  0%   { top: -5%; opacity: 0; }
  10%  { opacity: 1; }
  90%  { opacity: 0.6; }
  100% { top: 110%; opacity: 0; }
}
@keyframes uploadReveal {
  from { opacity: 0; transform: scale(0.97) translateY(10px); }
  to   { opacity: 1; transform: scale(1) translateY(0); }
}
@keyframes iconFloat {
  0%, 100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
  50%       { transform: translateX(-50%) translateY(-5px) rotate(20deg); }
}

.upload-area:hover {
  border-color: rgba(250,159,237,0.8);
  background: linear-gradient(135deg, rgba(253,220,255,0.10) 0%, rgba(24,26,44,0.78) 100%);
  box-shadow: 0 8px 48px rgba(236,98,178,0.18);
  transform: scale(1.008) translateY(-2px);
}

.upload-area.dropping {
  border-color: #fa97e7;
  background: linear-gradient(135deg, rgba(255,220,249,0.12) 0%, rgba(20,22,38,0.85) 100%);
  color: #f14292;
  box-shadow: 0 0 60px rgba(236,98,178,0.28), 0 0 20px rgba(109,195,254,0.14), inset 0 0 30px rgba(250,190,237,0.08);
  transform: scale(1.015);
  animation: dropPulse 0.6s ease-in-out infinite alternate;
}
@keyframes dropPulse {
  from { box-shadow: 0 0 40px rgba(236,98,178,0.22), inset 0 0 20px rgba(250,190,237,0.06); }
  to   { box-shadow: 0 0 80px rgba(236,98,178,0.38), inset 0 0 40px rgba(250,190,237,0.12); }
}

.upload-prompt {
  position: relative;
  z-index: 1;
  font-weight: 500;
  letter-spacing: 0.02em;
}
.upload-prompt .inline-btn {
  color: #fa97e7;
  background: none;
  border: none;
  border-bottom: 1.5px solid rgba(249,126,216,0.45);
  text-decoration: none;
  cursor: pointer;
  font: inherit;
  font-weight: 600;
  margin-left: 3px;
  padding: 0 4px;
  transition: color 0.22s, border-color 0.22s, text-shadow 0.22s;
}
.upload-prompt .inline-btn:hover {
  color: #6dc3fe;
  border-color: #6dc3fe;
  text-shadow: 0 0 12px rgba(109,195,254,0.6);
}

/* === ICON GRID === */
.icon-grid {
  display: grid;
  gap: 22px 18px;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  margin: 16px 0 28px 0;
  padding: 4px 0 8px 0;
  min-height: 60px;
}

.icon-preview {
  background: linear-gradient(148deg, rgba(253,224,230,0.92) 0%, rgba(255,246,250,0.97) 100%);
  border-radius: 1.2em;
  box-shadow: 0 4px 20px rgba(255,161,239,0.2), 0 1px 4px rgba(200,80,160,0.1), inset 0 1px 0 rgba(255,255,255,0.8);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 8px 10px 8px;
  transition: box-shadow 0.26s, background 0.26s, transform 0.22s cubic-bezier(.34,1.56,.64,1);
  position: relative;
  overflow: visible;
  animation: cardBounceIn 0.55s cubic-bezier(.27,1.55,.48,.81) both;
  border: 1.5px solid rgba(253,171,211,0.35);
}

.icon-preview:hover {
  transform: translateY(-5px) scale(1.04);
  box-shadow: 0 12px 36px rgba(238,98,236,0.28), 0 4px 12px rgba(200,80,160,0.18), inset 0 1px 0 rgba(255,255,255,0.9);
  background: linear-gradient(148deg, rgba(255,235,250,0.98) 0%, rgba(255,250,255,1) 100%);
  border-color: rgba(249,126,216,0.55);
  z-index: 5;
}

@keyframes cardBounceIn {
  0%   { opacity: 0; transform: scale(0.6) translateY(-30px) rotate(-5deg); }
  55%  { opacity: 0.9; transform: scale(1.12) translateY(12px) rotate(2deg); }
  75%  { opacity: 1; transform: scale(0.96) translateY(-4px) rotate(-1deg); }
  90%  { transform: scale(1.02) translateY(1px) rotate(0deg); }
  100% { opacity: 1; transform: scale(1) translateY(0) rotate(0deg); }
}

.icon-img {
  width: 76px; height: 76px;
  border-radius: 0.75em;
  background: linear-gradient(135deg, #f9cee2, #fde0f3);
  object-fit: contain;
  box-shadow: 0 3px 18px rgba(253,205,243,0.5);
  display: block;
  margin-bottom: 8px;
  transition: box-shadow 0.26s, filter 0.26s, transform 0.22s cubic-bezier(.34,1.56,.64,1);
}
.icon-preview:hover .icon-img {
  box-shadow: 0 0 32px rgba(238,98,236,0.7), 0 0 8px rgba(109,195,254,0.4);
  filter: saturate(1.15) brightness(1.08);
  transform: scale(1.06) rotate(-2deg);
}

.icon-rename {
  font-size: 0.82em;
  padding: 5px 8px;
  border-radius: 0.6em;
  border: 1px solid rgba(241,84,153,0.2);
  outline: none;
  text-align: center;
  background: rgba(255,243,247,0.92);
  color: #f15499;
  width: 92%;
  transition: background 0.22s, color 0.22s, border-color 0.22s, box-shadow 0.22s;
  margin-bottom: 3px;
  font-family: 'Fira Code', monospace;
}
.icon-rename:focus {
  background: #fdcdf3;
  color: #1a8fff;
  border-color: rgba(43,209,255,0.5);
  box-shadow: 0 0 0 3px rgba(43,209,255,0.15);
}

.icon-del {
  position: absolute;
  right: 6px; top: 6px;
  background: rgba(255,82,174,0.12);
  border: 1px solid rgba(255,82,174,0.2);
  border-radius: 50%;
  width: 26px; height: 26px;
  color: #ef6299;
  font-size: 0.85em;
  cursor: pointer;
  transition: background 0.22s, color 0.22s, transform 0.18s cubic-bezier(.34,1.56,.64,1), box-shadow 0.22s;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9;
  opacity: 0.7;
}
.icon-preview:hover .icon-del { opacity: 1; }
.icon-del:hover {
  background: rgba(250,60,150,0.22);
  color: #ff6eb3;
  transform: scale(1.2) rotate(90deg);
  box-shadow: 0 0 12px rgba(250,60,150,0.3);
}

.icon-manifest-row {
  margin: 2em 0 2.4em 0;
  font-size: 0.97em;
  display: flex;
  align-items: center;
  gap: 10px;
}
.icon-manifest-row label {
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 8px;
  color: #fa97e7;
  transition: color 0.2s;
}
.icon-manifest-row label:hover { color: #6dc3fe; }

/* Custom checkbox */
.icon-manifest-row input[type="checkbox"],
.wallpaper-export input[type="checkbox"],
.wallpaper-effects input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 18px; height: 18px;
  border-radius: 5px;
  border: 2px solid rgba(249,126,216,0.45);
  background: rgba(20,22,38,0.8);
  cursor: pointer;
  transition: background 0.22s, border-color 0.22s, box-shadow 0.22s, transform 0.18s cubic-bezier(.34,1.56,.64,1);
  position: relative;
  flex-shrink: 0;
  vertical-align: middle;
}
.icon-manifest-row input[type="checkbox"]:checked,
.wallpaper-export input[type="checkbox"]:checked,
.wallpaper-effects input[type="checkbox"]:checked {
  background: linear-gradient(135deg, #f97ed8, #da97fe);
  border-color: #fa97e7;
  box-shadow: 0 0 12px rgba(249,126,216,0.45);
  transform: scale(1.1);
}
.icon-manifest-row input[type="checkbox"]:checked::after,
.wallpaper-export input[type="checkbox"]:checked::after,
.wallpaper-effects input[type="checkbox"]:checked::after {
  content: "✓";
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 11px;
  color: white;
  font-weight: 700;
  animation: checkPop 0.25s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes checkPop {
  from { transform: translate(-50%, -50%) scale(0); }
  to   { transform: translate(-50%, -50%) scale(1); }
}

/* === BUTTONS === */
.glass-btn {
  background: linear-gradient(105deg, #fd85ed 0%, #f560d8 50%, #d44ac8 100%);
  color: #fff;
  border-radius: 1.5em;
  font: 600 1.1em 'Poppins', sans-serif;
  border: none;
  outline: none;
  padding: 15px 52px 15px 32px;
  margin: 1.8em auto 0 auto;
  min-width: 220px;
  box-shadow: 0 6px 28px rgba(253,133,237,0.38), 0 2px 8px rgba(212,74,200,0.3), inset 0 1px 0 rgba(255,220,255,0.3);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 16px;
  position: relative;
  overflow: hidden;
  transition: background 0.28s, box-shadow 0.28s, transform 0.2s cubic-bezier(.34,1.56,.64,1), letter-spacing 0.2s;
  animation: btnFloat 2.8s ease-in-out infinite alternate;
  text-shadow: 0 1px 4px rgba(180,30,160,0.3);
  letter-spacing: 0.01em;
}

.glass-btn::before {
  content: "";
  position: absolute;
  top: 0; left: -100%;
  width: 60%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent);
  transition: left 0s;
  border-radius: inherit;
}
.glass-btn:hover::before { left: 140%; transition: left 0.55s ease; }

@keyframes btnFloat {
  from { box-shadow: 0 6px 24px rgba(253,133,237,0.3), inset 0 1px 0 rgba(255,220,255,0.3); }
  to   { box-shadow: 0 12px 40px rgba(253,133,237,0.5), 0 0 20px rgba(109,195,254,0.2), inset 0 1px 0 rgba(255,220,255,0.3); }
}

.glass-btn:hover {
  background: linear-gradient(105deg, #f597f5 0%, #6dc3fe 60%, #56e0fa 100%);
  transform: translateY(-3px) scale(1.04);
  box-shadow: 0 14px 50px rgba(109,195,254,0.38), 0 6px 20px rgba(253,133,237,0.35), inset 0 1px 0 rgba(255,255,255,0.35);
  color: #0d2050;
  letter-spacing: 0.03em;
  text-shadow: none;
}
.glass-btn:active {
  transform: translateY(0) scale(0.98);
  box-shadow: 0 2px 12px rgba(253,133,237,0.3);
}
.glass-btn[disabled], .glass-btn:disabled {
  filter: grayscale(0.45) opacity(0.48);
  pointer-events: none;
  animation: none;
}

/* === PROGRESS SPINNER === */
.progress {
  width: 20px; height: 20px;
  display: inline-block;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.26s;
  flex-shrink: 0;
}
.glass-btn.loading .progress,
#wallpaper-export-btn.loading .progress,
#icon-export-btn.loading .progress { opacity: 1; }

.progress::after {
  content: "";
  display: block;
  width: 20px; height: 20px;
  border: 2.5px solid rgba(255,255,255,0.25);
  border-top: 2.5px solid #fff;
  border-right: 2.5px solid rgba(109,195,254,0.8);
  border-radius: 50%;
  animation: spinAnime 0.9s linear infinite;
}
@keyframes spinAnime { to { transform: rotate(360deg); } }

/* === WALLPAPER CONTROLS === */
.wallpaper-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 20px 16px;
  margin: 22px 0 30px 0;
  align-items: flex-start;
  animation: animeFadeUp 0.6s 0.1s cubic-bezier(.4,0,.2,1) both;
}

.wallpaper-settings {
  display: flex;
  gap: 14px;
  flex-wrap: wrap;
  align-items: flex-end;
}

.wallpaper-settings fieldset,
.wallpaper-export fieldset {
  border: 1.5px solid rgba(251,177,229,0.18);
  border-radius: 0.85em;
  padding: 12px 16px;
  background: rgba(255,255,255,0.03);
  transition: border-color 0.22s, background 0.22s;
  min-width: 120px;
}
.wallpaper-settings fieldset:hover,
.wallpaper-export fieldset:hover {
  border-color: rgba(249,126,216,0.38);
  background: rgba(249,126,216,0.04);
}

.wallpaper-settings legend,
.wallpaper-export legend {
  color: #fa97e7;
  font-size: 0.82em;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  padding: 0 6px;
  text-shadow: 0 0 10px rgba(249,126,216,0.4);
}

.wallpaper-settings select {
  appearance: none;
  -webkit-appearance: none;
  background: rgba(20,22,38,0.85);
  border: 1.5px solid rgba(249,126,216,0.28);
  border-radius: 0.65em;
  color: #fdcdf3;
  font: 500 0.92em 'Poppins', sans-serif;
  padding: 7px 28px 7px 11px;
  cursor: pointer;
  transition: border-color 0.22s, box-shadow 0.22s;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='7'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23fa97e7' stroke-width='1.8' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  min-width: 130px;
}
.wallpaper-settings select:focus {
  outline: none;
  border-color: #fa97e7;
  box-shadow: 0 0 0 3px rgba(249,126,216,0.18);
  color: #fff;
}

.wallpaper-settings input[type="range"],
.wallpaper-controls input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 90px;
  height: 5px;
  border-radius: 3px;
  background: linear-gradient(90deg, rgba(249,126,216,0.5), rgba(109,195,254,0.3));
  outline: none;
  cursor: pointer;
  vertical-align: middle;
  margin: 0 8px;
}
.wallpaper-settings input[type="range"]::-webkit-slider-thumb,
.wallpaper-controls input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px; height: 16px;
  border-radius: 50%;
  background: linear-gradient(135deg, #fa97e7, #6dc3fe);
  box-shadow: 0 0 8px rgba(249,126,216,0.6);
  cursor: pointer;
  transition: transform 0.18s cubic-bezier(.34,1.56,.64,1), box-shadow 0.18s;
}
.wallpaper-settings input[type="range"]:hover::-webkit-slider-thumb,
.wallpaper-controls input[type="range"]:hover::-webkit-slider-thumb {
  transform: scale(1.25);
  box-shadow: 0 0 16px rgba(249,126,216,0.8), 0 0 6px rgba(109,195,254,0.5);
}

.wallpaper-settings input[type="color"] {
  width: 36px; height: 26px;
  border-radius: 6px;
  border: 1.5px solid rgba(249,126,216,0.4);
  background: none;
  cursor: pointer;
  padding: 0;
  margin-left: 8px;
  vertical-align: middle;
  transition: transform 0.18s cubic-bezier(.34,1.56,.64,1), box-shadow 0.22s;
}
.wallpaper-settings input[type="color"]:hover {
  transform: scale(1.12);
  box-shadow: 0 0 12px rgba(249,126,216,0.5);
}

.wallpaper-settings label,
.wallpaper-effects label,
.wallpaper-export label {
  font-size: 0.9em;
  color: #fdcdf3;
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  transition: color 0.2s;
  margin: 4px 0;
}
.wallpaper-settings label:hover,
.wallpaper-effects label:hover,
.wallpaper-export label:hover { color: #6dc3fe; }

.wallpaper-effects {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  border: 1.5px solid rgba(251,177,229,0.18);
  border-radius: 0.85em;
  background: rgba(255,255,255,0.03);
  transition: border-color 0.22s;
}
.wallpaper-effects:hover { border-color: rgba(249,126,216,0.38); }

#wallpaper-darkness-val {
  font-size: 0.85em;
  color: #fa97e7;
  font-family: 'Fira Code', monospace;
  margin-left: 4px;
  min-width: 36px;
  display: inline-block;
  text-align: right;
}

/* === WALLPAPER CANVAS === */
.wallpaper-preview-controls {
  display: flex;
  justify-content: center;
  margin-top: 20px;
  gap: 12px;
}

#wallpaper-preview-wrap {
  text-align: center;
  margin: 0 auto;
  max-width: 440px;
  background: transparent;
  position: relative;
}

#wallpaper-preview-wrap::before {
  content: "";
  position: absolute;
  inset: -20px;
  border-radius: 3em;
  background: radial-gradient(ellipse at 50% 60%, rgba(249,126,216,0.12) 0%, transparent 70%);
  pointer-events: none;
  animation: canvasGlow 4s ease-in-out infinite alternate;
}
@keyframes canvasGlow {
  from { opacity: 0.6; transform: scale(0.98); }
  to   { opacity: 1; transform: scale(1.02); }
}

#wallpaper-canvas {
  display: block;
  margin: 0 auto;
  background: #ffebef;
  border-radius: 2.2em;
  width: 390px; height: 780px;
  max-width: 97vw;
  transition: box-shadow 0.4s, transform 0.26s cubic-bezier(.34,1.56,.64,1);
  box-shadow:
    0 12px 80px rgba(253,196,228,0.35),
    0 0 0 8px rgba(20,22,38,0.9),
    0 0 0 9.5px rgba(251,177,229,0.25),
    0 24px 60px rgba(13,14,24,0.6);
  animation: canvasReveal 1s 0.2s cubic-bezier(.4,0,.2,1) both;
}
#wallpaper-canvas:hover {
  transform: scale(1.012) translateY(-4px);
  box-shadow:
    0 20px 100px rgba(253,196,228,0.48),
    0 0 0 8px rgba(20,22,38,0.9),
    0 0 0 9.5px rgba(249,126,216,0.45),
    0 32px 80px rgba(13,14,24,0.65);
}
@keyframes canvasReveal {
  from { opacity: 0; transform: scale(0.9) translateY(30px); filter: blur(6px); }
  to   { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
}
@media (max-width: 600px) { #wallpaper-canvas { width: 96vw; height: auto; } }

/* === CUSTOM RESOLUTION INPUTS === */
.wallpaper-res-custom[type="text"] {
  background: rgba(253,230,247,0.18);
  border: 1.5px solid rgba(241,84,153,0.3);
  border-radius: 0.55em;
  color: #fa97e7;
  width: 48px;
  padding: 4px 6px;
  font-size: 0.9em;
  font-family: 'Fira Code', monospace;
  text-align: center;
  transition: border-color 0.22s, box-shadow 0.22s;
}
.wallpaper-res-custom[type="text"]:focus {
  outline: none;
  border-color: #6dc3fe;
  box-shadow: 0 0 0 3px rgba(109,195,254,0.18);
  color: #6dc3fe;
}

/* === NOTIFICATIONS === */
#notifier {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  top: 20px;
  z-index: 9999;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.notif {
  background: linear-gradient(100deg, rgba(218,151,254,0.92) 0%, rgba(255,210,252,0.95) 100%);
  color: #36115a;
  border-radius: 2em;
  font: 600 0.95em 'Poppins', sans-serif;
  padding: 13px 40px;
  opacity: 0;
  box-shadow: 0 8px 32px rgba(218,151,254,0.35), 0 2px 8px rgba(180,60,220,0.2), inset 0 1px 0 rgba(255,255,255,0.6);
  animation: notifIn 0.7s cubic-bezier(.34,1.56,.64,1) both;
  pointer-events: auto;
  backdrop-filter: blur(12px);
  border: 1.5px solid rgba(218,151,254,0.5);
  letter-spacing: 0.02em;
  position: relative;
  overflow: hidden;
}
.notif::before {
  content: "";
  position: absolute;
  top: 0; left: -80%;
  width: 60%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: notifSweep 2s ease 0.5s 1 both;
}
@keyframes notifSweep {
  from { left: -80%; }
  to   { left: 130%; }
}
@keyframes notifIn {
  0%   { opacity: 0; transform: translateY(-20px) scale(0.85); }
  55%  { opacity: 1; transform: translateY(4px) scale(1.04); }
  75%  { transform: translateY(-2px) scale(0.99); }
  100% { opacity: 0.97; transform: translateY(0) scale(1); }
}
.notif.success {
  background: linear-gradient(100deg, rgba(253,205,243,0.94) 0%, rgba(255,194,235,0.96) 100%);
  color: #174832;
  border-color: rgba(253,171,211,0.55);
  box-shadow: 0 8px 32px rgba(249,126,216,0.3), inset 0 1px 0 rgba(255,255,255,0.6);
}

/* === LOADING OVERLAY === */
.loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 12000;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 24px;
  background: rgba(13,14,26,0.55);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  transition: opacity 0.35s cubic-bezier(.4,0,.2,1);
  opacity: 1;
  pointer-events: all;
}
.loading-overlay.hidden { opacity: 0; pointer-events: none; }

.loader {
  width: 56px; height: 56px;
  position: relative;
}
.loader::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 4px solid transparent;
  border-top-color: #fa97e7;
  border-right-color: rgba(249,126,216,0.4);
  animation: spinAnime 1.1s linear infinite;
}
.loader::after {
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: 50%;
  border: 3px solid transparent;
  border-bottom-color: #6dc3fe;
  border-left-color: rgba(109,195,254,0.35);
  animation: spinAnime 0.8s linear infinite reverse;
}

#loading-msg {
  color: #fdcdf3;
  font-family: 'Poppins';
  font-size: 1.08em;
  font-weight: 500;
  letter-spacing: 0.08em;
  text-shadow: 0 3px 16px rgba(253,205,243,0.6);
  animation: loadingPulse 1.8s ease-in-out infinite;
}
@keyframes loadingPulse {
  0%, 100% { opacity: 0.8; }
  50%       { opacity: 1; text-shadow: 0 3px 24px rgba(253,205,243,0.9); }
}

/* === SAKURA PETALS === */
.sakura-petal {
  position: fixed;
  z-index: 100;
  pointer-events: none;
  width: 24px; height: auto;
  opacity: 0.25;
  filter: blur(0.4px) drop-shadow(0 4px 18px rgba(253,205,243,0.7));
  animation: sakuraFall var(--spd, 7s) ease-in forwards;
}
@keyframes sakuraFall {
  0%   { transform: translateY(-100px) translateX(0px) rotateZ(0deg) scale(0.85); opacity: 0; }
  5%   { opacity: 0.25; }
  20%  { transform: translateY(15vh) translateX(20px) rotateZ(30deg) scale(1.05); }
  40%  { transform: translateY(35vh) translateX(-15px) rotateZ(70deg) scale(1.18); }
  60%  { transform: translateY(55vh) translateX(25px) rotateZ(120deg) scale(1.1); }
  80%  { transform: translateY(75vh) translateX(-10px) rotateZ(165deg) scale(0.95); opacity: 0.18; }
  100% { transform: translateY(105vh) translateX(8px) rotateZ(210deg) scale(0.8); opacity: 0; }
}

/* === PWA INSTALL BAR === */
#pwa-install-bar {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9000;
  padding: 14px 28px;
  display: flex;
  align-items: center;
  gap: 14px;
  animation: animeFadeUp 0.8s cubic-bezier(.34,1.56,.64,1) both;
  white-space: nowrap;
}
#pwa-install-bar .glass-btn { margin: 0; min-width: 150px; }

/* === OFFLINE INDICATOR === */
.offline-indicator {
  position: fixed;
  top: 14px; left: 50%;
  transform: translateX(-50%);
  z-index: 9500;
  padding: 9px 28px;
  background: linear-gradient(90deg, #f97ed8 10%, #da97fe 100%);
  color: #fff;
  font-weight: 600;
  font-size: 0.92em;
  border-radius: 2em;
  box-shadow: 0 4px 24px rgba(249,126,216,0.45), 0 0 0 2px rgba(218,151,254,0.3);
  letter-spacing: 0.07em;
  animation: offlineIn 0.5s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes offlineIn {
  from { opacity: 0; transform: translateX(-50%) translateY(-12px) scale(0.9); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
}

/* === UTILITY === */
::-webkit-input-placeholder { color: rgba(253,205,243,0.45); }
:-ms-input-placeholder      { color: rgba(253,205,243,0.45); }
::placeholder                { color: rgba(253,205,243,0.45); }

::-webkit-scrollbar { width: 7px; background: transparent; }
::-webkit-scrollbar-track { background: rgba(20,22,38,0.5); }
::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(249,126,216,0.4), rgba(109,195,254,0.3));
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, rgba(249,126,216,0.7), rgba(109,195,254,0.55));
}

::selection { background: rgba(249,126,216,0.35); color: #fff; }

:focus-visible {
  outline: 2px solid rgba(249,126,216,0.7);
  outline-offset: 3px;
  border-radius: 4px;
}

.hidden, [hidden] { display: none !important; }

/* === GLOBAL KEYFRAMES === */
@keyframes animeFade    { from{opacity:0} to{opacity:1} }
@keyframes animeFadeUp  { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }
@keyframes animePopIn   { from{opacity:0;transform:scale(.82) rotateX(-12deg)} to{opacity:1;transform:scale(1) rotateX(0)} }
@keyframes animeSlideIn { from{opacity:.2;transform:translateY(16px) scale(.93)} to{opacity:1;transform:translateY(0) scale(1)} }

/* === RESPONSIVE === */
@media (max-width: 600px) {
  .branding { margin: 24px auto 12px auto; padding: 12px 24px 12px 14px; gap: 14px; }
  .branding h1 { font-size: 1.2rem; }
  .branding-logo { width: 44px; height: 44px; }
  .wallpaper-settings { flex-direction: column; }
  .wallpaper-controls { flex-direction: column; gap: 14px; }
  .glass-btn { min-width: 170px; font-size: 1em; padding: 13px 36px 13px 22px; }
}
